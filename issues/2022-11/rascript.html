<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta content="width=device-width" name="viewport">
  <!-- <title>RAScript Tutorials</title> -->
  <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>RAScript Tutorials | RANews</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="RAScript Tutorials" />
<meta name="author" content="Etron" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Tutorial #9 – Trigger and Measure Together" />
<meta property="og:description" content="Tutorial #9 – Trigger and Measure Together" />
<link rel="canonical" href="https://news.retroachievements.org/issues/2022-11/rascript.html" />
<meta property="og:url" content="https://news.retroachievements.org/issues/2022-11/rascript.html" />
<meta property="og:site_name" content="RANews" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2025-09-04T22:30:02+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="RAScript Tutorials" />
<script type="application/ld+json">
{"author":{"@type":"Person","name":"Etron"},"headline":"RAScript Tutorials","dateModified":"2025-09-04T22:30:02+00:00","datePublished":"2025-09-04T22:30:02+00:00","description":"Tutorial #9 – Trigger and Measure Together","url":"https://news.retroachievements.org/issues/2022-11/rascript.html","mainEntityOfPage":{"@type":"WebPage","@id":"https://news.retroachievements.org/issues/2022-11/rascript.html"},"@type":"BlogPosting","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  <link type="application/atom+xml" rel="alternate" href="https://news.retroachievements.org/feed.xml" title="RANews" />

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-177315439-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'UA-177315439-1');
  </script>

  <link href="https://use.fontawesome.com/releases/v5.12.0/css/all.css" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@0,400;0,700;1,400;1,700&display=swap"
    rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Play:wght@700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/css/normalize.css">
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/rafont.css">
  <link rel="shortcut icon" type="image/png"
    href="/img/retroachievements-logo-color-transparent-square.png" sizes="16x16 32x32 64x64">
</head>

<body>

  <div class="grid">
    <aside>
  <div class="sidebar-header">
    <a href="https://news.retroachievements.org">
      <img alt="" src="/img/ranews-small.png">
    </a>
  </div>
  <div class="article-list-container">
    <h2>2022-11</h2>

    <label for="article-list-toggle">&#9776;</label>
    <input id="article-list-toggle" type="checkbox"/>

    <ul class="article-list">
      
      
        
          

          
            <a href="/issues/2022-11/index.html">
              <li>Introduction</li>
            </a>
          
        
      
        
          

          
            <a href="/issues/2022-11/set-of-the-month.html">
              <li>Set of the Month</li>
            </a>
          
        
      
        
          

          
            <a href="/issues/2022-11/long-way-to-the-top.html">
              <li>It's a Long Way to the Top</li>
            </a>
          
        
      
        
          

          
            <a href="/issues/2022-11/stats.html">
              <li>PlayStation 2 Stats</li>
            </a>
          
        
      
        
          

          
            <a href="/issues/2022-11/milestones.html">
              <li>Milestones</li>
            </a>
          
        
      
        
          

          
            <a href="/issues/2022-11/events.html">
              <li>Current Events</li>
            </a>
          
        
      
        
          

          
            <a href="/issues/2022-11/community-news.html">
              <li>Community News</li>
            </a>
          
        
      
        
          

          
            <li class="active">RAScript Tutorials</li>
          
        
      
        
          

          
            <a href="/issues/2022-11/play-this-set.html">
              <li>Play This Set</li>
            </a>
          
        
      
        
          

          
            <a href="/issues/2022-11/wish-this-set.html">
              <li>Wish This Set</li>
            </a>
          
        
      
        
          

          
            <a href="/issues/2022-11/guide.html">
              <li>RAGuide</li>
            </a>
          
        
      
        
          

          
            <a href="/issues/2022-11/hot-cheevs.html">
              <li>HotCheevs Monthly</li>
            </a>
          
        
      
        
          

          
            <a href="/issues/2022-11/revisions.html">
              <li>Revisions and Rescores</li>
            </a>
          
        
      
        
          

          
            <a href="/issues/2022-11/art-updates.html">
              <li>Art Updates</li>
            </a>
          
        
      
        
          

          
            <a href="/issues/2022-11/top-players.html">
              <li>Top Players</li>
            </a>
          
        
      
        
          

          
            <a href="/issues/2022-11/ranniversaries.html">
              <li>RAnniversaries</li>
            </a>
          
        
      
        
          

          
            <a href="/issues/2022-11/top-masteries.html">
              <li>Top Masteries</li>
            </a>
          
        
      
        
          

          
            <a href="/issues/2022-11/most-wanted.html">
              <li>Most Wanted Games</li>
            </a>
          
        
      
        
          

          
            <a href="/issues/2022-11/fun.html">
              <li>Fun</li>
            </a>
          
        
      
    </ul>
  </div>
  <div class="footer">
    <ul class="icons">
      <li>
        <a href="https://retroachievements.org/">
          <i class="icon icon-retroachievements"></i>
        </a>
      </li>
      <li>
        <a href="https://discord.gg/dq2E4hE">
          <i class="fab fa-discord"></i>
        </a>
      </li>
      <li>
        <a href="https://docs.retroachievements.org/">
          <i class="fa fa-book"></i>
        </a>
      </li>
      <li>
        <a href="https://github.com/RetroAchievements">
          <i class="fab fa-github"></i>
        </a>
      </li>
    </ul>
  </div>
</aside>

    <main>
      <header>
        <nav>
  
    <a href="/issues/2022-11/community-news.html" class="previous">
      &#x00ab
      
        Community News
      
    </a>
  
  
    <a href="/issues/2022-11/play-this-set.html" class="next">
      
        Play This Set
      
      &#x00bb
    </a>
  
</nav>
      </header>
      <article>
        <header>
          
          <h1 id="top">RAScript Tutorials</h1>
          

          
          
          <div class="author">
            
              
              
              
              <img src="https://retroachievements.org/UserPic/Etron.png" alt="Etron">
            
            <span>By 
              
                
                
                <a href="https://retroachievements.org/user/Etron">Etron</a>
              
            </span>
          </div>
          
        </header>

        
        <div id="toc" class="toc-container ">
          <p class="toc-title">Contents</p>
          <ul>
  <li><a href="#tutorial-9--trigger-and-measure-together">Tutorial #9 – Trigger and Measure Together</a></li>
  <li><a href="#overview">Overview</a>
    <ul>
      <li><a href="#trigger-and-measure-flag-together-at-last">Trigger and Measure Flag Together at Last</a></li>
    </ul>
  </li>
  <li><a href="#example-9a-street-fighter-ii-1cc">Example #9A: Street Fighter II 1CC</a>
    <ul>
      <li><a href="#start">Start</a></li>
      <li><a href="#cancel">Cancel</a></li>
      <li><a href="#goal">Goal</a></li>
      <li><a href="#coding-alts">Coding Alts</a>
        <ul>
          <li><a href="#script">Script</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#example-9b-kimarite">Example #9B: Kimarite</a>
    <ul>
      <li><a href="#start-1">Start</a></li>
      <li><a href="#cancel-1">Cancel</a></li>
      <li><a href="#goal-1">Goal</a>
        <ul>
          <li><a href="#script-1">Script</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#example-9c-one-character-beat">Example #9C: One Character Beat</a>
    <ul>
      <li><a href="#homework-9">Homework #9</a></li>
      <li><a href="#useful-memory">Useful Memory</a>
        <ul>
          <li><a href="#solution">Solution</a></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>
        </div>
        

        <h1 id="tutorial-9--trigger-and-measure-together">Tutorial #9 – Trigger and Measure Together</h1>

<h1 id="overview">Overview</h1>
<p>This tutorial will show a few examples of how to create an achievement that uses both the trigger and measure flags together.  The game <a href="https://retroachievements.org/game/11808">Street Fighter II: The World Warrior</a> was chosen for this tutorial because it is a fighting game that counts both the number of fights you have won and the type of attacks made.  These types of in game statistics work well for showing both what challenges are active and how far the player has gotten into the challenge. You could code it with just triggers however, by adding a measure the player gets both on screen notifications of when the achievement is primed as well as feedback of how far along they are to achieving the challenge.</p>

<p align="center">
  <img src="https://github.com/Etron-RA/RetroAchievements/blob/main/Tutorials/09_Trigger_and_Measure/Street_Fighter_2_Title.png?raw=true" />
</p>

<h2 id="trigger-and-measure-flag-together-at-last">Trigger and Measure Flag Together at Last</h2>

<p>The <strong>trigger</strong> and <strong>measure</strong> flags conflict with each other and cannot exist together in the core or in an alt.  This is because you can only put one flag on a line of code at a time.  To use <strong>trigger</strong> and <strong>measure</strong> together you must put them each in separate alts.  The best way to use both flags together is to make a <strong>goal</strong> event that triggers when the player has successfully completed the achievement requirements. Then wrap the <strong>goal</strong> in a <code class="language-plaintext highlighter-rouge">trigger_when()</code> in the first alt and wrap the same <strong>goal</strong> in a <code class="language-plaintext highlighter-rouge">measured()</code> in the second alt.  The following examples will show how to use both flags using a similar method to coding challenges from the previous tutorials.</p>

<h1 id="example-9a-street-fighter-ii-1cc">Example #9A: Street Fighter II 1CC</h1>
<p>To beat the game and become a <strong>World Warrior</strong> you must defeat all of the other seven playable and four boss fighters. The challenge for this achievement is to beat all the fighters in a row without losing a fight. This is a hard achievement since the difficulty ramps up quickly as you progress through the fighters.  Additionally, the computer cheats by being able to perform moves faster, or in some cases, impossible for a human player.  If you ever got stuck on a fighter in the past don’t feel bad, the computer wasn’t playing fair.</p>

<p align="center">
  <img src="https://github.com/Etron-RA/RetroAchievements/blob/main/Tutorials/09_Trigger_and_Measure/Street_Fighter_2_Guile_Wins.png?raw=true" />
</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// Street Fighter II: The World Warrior
// #ID = 11808

// $82DB: Attract mode flag
function AttractMode() =&gt; byte(0x0082DB)
function AttractActive() =&gt; AttractMode() == 1

// $8655: P1 Status (1 = Active)
function Player1Status() =&gt; byte(0x008655)
function Player1Active() =&gt; Player1Status() == 1

// $8955: P2 Status (1 = Active)
function Player2Status() =&gt; byte(0x008955)
function Player2Active() =&gt; Player2Status() == 1

// $89CC: Defeated CPU opponents 0b=ending
function DefeatedOpponents() =&gt; byte(0x0089CC)

// Challenge to beat the game without using a continue
function Beat1CC()
{
    // Start when player 1 starts the 1st fight
    start = once(Player1Active() &amp;&amp; 
        DefeatedOpponents() == 0)    
    
    // Cancel if the attract demo is on, player 2 starts, or player 1 loses a fight
    cancel = never(AttractActive()) &amp;&amp; 
        never(Player2Active()) &amp;&amp; 
        never(!Player1Active())
        
    // The goal is to beat all 12 fighters
    goal = DefeatedOpponents() == 0xb
    
    // Trigger when the player reaches the goal
    submit = trigger_when(goal)
        
    // Measure how close the player is to the goal
    value = measured(goal)
    
    return start &amp;&amp; cancel &amp;&amp; (submit || value)
}

achievement(
    title = "Example #9A: Street Fighter II 1CC", 
    description = "Beat the game using only one credit", 
    points = 25,
    trigger = Beat1CC()
)
</code></pre></div></div>
<h2 id="start">Start</h2>

<p>The achievement uses <code class="language-plaintext highlighter-rouge">once()</code> to add a hit when player one starts the first fight.  The hit will prime the achievement to show the trigger indicator until the <strong>cancel</strong> or <strong>goal</strong> events occur.</p>

<h2 id="cancel">Cancel</h2>

<p>The achievement uses <code class="language-plaintext highlighter-rouge">never()</code> to remove the hit from the <strong>start</strong> event when the attract demo is on, player two starts playing, or player one loses a fight.</p>

<h2 id="goal">Goal</h2>

<p>The <strong>goal</strong> requirements are satisfied when the player beats the final boss, M. Bison (or Vega in the Japan region). The code then defines the <strong>submit</strong> event by wrapping the <strong>goal</strong> event in the <code class="language-plaintext highlighter-rouge">trigger_when()</code> function.  Similarly, the <strong>value</strong> event is created by wrapping the same <strong>goal</strong> event in the <code class="language-plaintext highlighter-rouge">measured()</code> function.  By coding the achievement this way the trigger will continue to show the indicator until the player loses a fight and the achievement overlay will show how many more fights the player has left to win to earn the achievement.</p>

<h2 id="coding-alts">Coding Alts</h2>

<p>When the function <code class="language-plaintext highlighter-rouge">Beat1CC()</code> returns the generated code to the achievement trigger it builds the code using the or operator <code class="language-plaintext highlighter-rouge">||</code> to place the <strong>submit</strong> event in one alt and the <strong>value</strong> event in a second alt.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>return start &amp;&amp; cancel &amp;&amp; (submit || value)
</code></pre></div></div>
<p>Note the parenthesis around the <strong>submit</strong> and <strong>value</strong> events.  The parenthesis separates the alt events from the core which will only contain the <strong>start</strong> and <strong>cancel</strong> events.</p>

<h3 id="script">Script</h3>
<p>Scripts: <a href="https://github.com/Etron-RA/RetroAchievements/blob/main/Tutorials/09_Trigger_and_Measure/Street_Fighter_II_The_World_Warrior_Example_9A.rascript">Example #9A script</a></p>

<h1 id="example-9b-kimarite">Example #9B: Kimarite</h1>
<p>Every character in Street Fighter II has a unique move set of special moves to match there fighting style (except for Ken and Ryu since they were both taught to fight by the same master).  The Sumo wrestler E. Honda has a very powerful special move call the Hundred Hand Slap where his hands slap so fast that they start to blur on the screen.  This special move is easy to perform by rapidly pressing any of the three punch buttons. The goal of this achievement is to hit the opponent 4 times only using the Hundred Hand Slap.</p>

<p align="center">
  <img src="https://github.com/Etron-RA/RetroAchievements/blob/main/Tutorials/09_Trigger_and_Measure/Street_Fighter_2_Honda_100_Hand_Slap.png?raw=true" />
</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// Street Fighter II: The World Warrior
// #ID = 11808

// $8008: Event
//        0a=during fight
function Event() =&gt; byte(0x008008)

// $82DB: Attract mode flag
function AttractMode() =&gt; byte(0x0082DB)
function AttractActive() =&gt; AttractMode() == 1

// $83F1: P1 KO flag
function Player1Flag() =&gt; byte(0x0083F1)
function Player1KO() =&gt; Player1Flag() == 255

// $8547: P1 attack buffer (Honda and Blanka)
function Player1AttackBuffer() =&gt; byte(0x8547)

// $8656: P1 Character
function Player1Character() =&gt; byte(0x008656)
Ryu = 0
EHonda = 1
Blanka = 2
Guile = 3
Ken = 4
ChunLi = 5
Zangief = 6
Dhalsim = 7

// $86F0: P2 HP
function Player2Health() =&gt; byte(0x0086F0)

// $86F1: P2 KO flag
function Player2Flag() =&gt; byte(0x0086F1)
function Player2KO() =&gt; Player2Flag() == 255

// $8955: P2 Status (1 = Active)
function Player2Status() =&gt; byte(0x008955)
function Player2Active() =&gt; Player2Status() == 1

// $8AE2: P1 number of attacks done during the round (except Zangief)
function Player1Attacks() =&gt; byte(0x008AE2)

// Challenge to hit the oponent 4 times with Hundred Hand Slap and nothing else
function Kimarite()
{
    // Start at the beginning of a round when the fight event changes to 0xa and the player has no hits
    start = once(Player1Attacks() == 0 &amp;&amp;
        prev(Event()) != 0xa &amp;&amp;
        Event() == 0xa)

    // Cancel if the attract demo is on, player 2 starts, player 1 is not E-Honda,
    // either player has been knocked out, or the player has landed an attack other than Hundred Hand Slaps
    cancel = never(AttractActive()) &amp;&amp;
        never(Player2Active()) &amp;&amp; 
        never(Player1Character() != EHonda) &amp;&amp;
        never(Player1KO()) &amp;&amp;
        never(Player2KO()) &amp;&amp;
        never(
            prev(Player2Health()) &gt; Player2Health() &amp;&amp;
            Player1AttackBuffer() != 51 &amp;&amp; 
            Player1AttackBuffer() != 52 &amp;&amp; 
            Player1AttackBuffer() != 53
        )
    
    // The goal is reaching 4 Hundred Hand Slaps without using any other attack
    goal = repeated(4, prev(Player2Health()) &gt; Player2Health())
    
    // Trigger when the player reaches the goal
    submit = trigger_when(goal)
        
    // Measure how close the player is to the goal
    value = measured(goal)
    
    return start &amp;&amp; cancel &amp;&amp; (submit || value)
}

achievement(
    title = "Example #9B: Kimarite", 
    description = "Successfully hit the opponent 4 times with Hundred Hand Slap and nothing else", 
    points = 5,
    trigger = Kimarite()
)
</code></pre></div></div>
<h2 id="start-1">Start</h2>

<p>The achievement uses <code class="language-plaintext highlighter-rouge">once()</code> to add a hit when player one starts any round.  The hit will prime the achievement to show the trigger indicator until the <strong>cancel</strong> or <strong>goal</strong> events occur.</p>

<h2 id="cancel-1">Cancel</h2>

<p>The achievement uses <code class="language-plaintext highlighter-rouge">never()</code> to remove the hit from the <strong>start</strong> event when the attract demo is on, player two starts playing, player one is not E-Honda, either player has been knocked out, or the player has landed an attack other than Hundred Hand Slap.  The final cancel condition is a little more complex and will cancel only when player two loses health while the attack in the attack buffer is not one of the three variations of the Hundred Hand Slap.</p>

<h2 id="goal-1">Goal</h2>

<p>The <strong>goal</strong> requirements are satisfied when the player hits the opponent with only four Hundred Hand Slaps.  Similarly to the last example, the <strong>goal</strong> is used with a <code class="language-plaintext highlighter-rouge">trigger_when()</code> function to create the <strong>submit</strong> event and used with the <code class="language-plaintext highlighter-rouge">measured</code> function to create the <strong>value</strong> event.</p>

<h3 id="script-1">Script</h3>

<p>Scripts: <a href="https://github.com/Etron-RA/RetroAchievements/blob/main/Tutorials/09_Trigger_and_Measure/Street_Fighter_II_The_World_Warrior_Example_9B.rascript">Example #9B script</a></p>

<h1 id="example-9c-one-character-beat">Example #9C: One Character Beat</h1>
<p>Street Fighter II has a total of eight playable characters to choose from.  Typically fighting game sets have a group of achievements for beating the game using each character.  These achievements are all very similar so you can take advantage of RATools to generate all these achievements using the same function.</p>

<p align="center">
  <img src="https://github.com/Etron-RA/RetroAchievements/blob/main/Tutorials/09_Trigger_and_Measure/Street_Fighter_2_Select_Screen.png?raw=true" />
</p>

<h2 id="homework-9">Homework #9</h2>

<p>Pick any fighter and make a function that will generate an achievement to beat the game using only that fighter.</p>

<h2 id="useful-memory">Useful Memory</h2>

<p>To complete the homework problem you’ll need the memory address:</p>

<p>0x008656 -&gt; [8-bit] P1 Character</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">ID</th>
      <th>Character</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">0x0</td>
      <td>Ryu</td>
    </tr>
    <tr>
      <td style="text-align: center">0x1</td>
      <td>E.Honda</td>
    </tr>
    <tr>
      <td style="text-align: center">0x2</td>
      <td>Blanka</td>
    </tr>
    <tr>
      <td style="text-align: center">0x3</td>
      <td>Guile</td>
    </tr>
    <tr>
      <td style="text-align: center">0x4</td>
      <td>Ken</td>
    </tr>
    <tr>
      <td style="text-align: center">0x5</td>
      <td>ChunLi</td>
    </tr>
    <tr>
      <td style="text-align: center">0x6</td>
      <td>Zangief</td>
    </tr>
    <tr>
      <td style="text-align: center">0x7</td>
      <td>Dhalsim</td>
    </tr>
  </tbody>
</table>

<h3 id="solution">Solution</h3>
<p>Solutions: <a href="https://github.com/Etron-RA/RetroAchievements/blob/main/Tutorials/09_Trigger_and_Measure/Solution/readme.md">Tutorial #9 Solution</a></p>

<hr />

<p><a href="../2022-02/rascript.html#tutorial-0---getting-started">Tutorial #0 - Getting Started</a><br />
<a href="../2022-02/rascript.html#tutorial-1---memory-basics">Tutorial #1 - Memory Basics</a><br />
<a href="../2022-03/rascript.html#tutorial-2---add-hits">Tutorial #2 - Add Hits</a><br />
<a href="../2022-04/rascript.html#tutorial-3---bit-flags">Tutorial #3 - Bit Flags</a><br />
<a href="../2022-05/rascript.html#tutorial-4---arithmetic-operations">Tutorial #4 - Arithmetic Operations</a><br />
<a href="../2022-06/rascript.html#tutorial-5---pointers">Tutorial #5 - Pointers</a><br />
<a href="../2022-07/rascript.html#tutorial-6--ifelse">Tutorial #6 - If/Else</a><br />
<a href="../2022-08/rascript.html#tutorial-7--challenges-part-1">Tutorial #7 - Challenges Part 1</a><br />
<a href="../2022-09/rascript.html#tutorial-8--challenges-part-2">Tutorial #8 - Challenges Part 2</a></p>

<p>All RAScript Tutorials can be found <a href="https://github.com/Etron-RA/RetroAchievements/tree/main/Tutorials">here</a>.</p>


      </article>
      <footer>
        <nav>
  
    <a href="/issues/2022-11/community-news.html" class="previous">
      &#x00ab
      
        Community News
      
    </a>
  
  
    <a href="/issues/2022-11/play-this-set.html" class="next">
      
        Play This Set
      
      &#x00bb
    </a>
  
</nav>
      </footer>
    </main>
  </div>

</body>

</html>